/***********************************************************************
 *   ___  ___  ___  ___  ___  ___   _    ___  _ _ _ 
 *  | . || __>|_ _|| __>| . \/  _> | |  | . || | | |
 *  |   || _>  | | | _> |   /| <_/\| |_ | | || | | |
 *  |_|_||_|   |_| |___>|_\_\`____/|___|`___'|__/_/ 
 *                                                 rp2040
 *      Copyright (c) 2024 bitfield labs
 *
 ***********************************************************************
 *  This file is part of the afterglow pinball LED project:
 *  https://github.com/bitfieldlabs/afterglow
 *
 *  afterglow is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Lesser General Public License as
 *  published by the Free Software Foundation, either version 3 of the
 *  License, or (at your option) any later version.
 *
 *  afterglow is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Lesser General Public License for more details.
 *
 *  You should have received a copy of the GNU Lesser General Public
 *  License along with afterglow.
 *  If not, see <http://www.gnu.org/licenses/>.
 ***********************************************************************/

#include "display.h"
#include "pico/stdlib.h"
#include "ssd1306.h"

#include "hardware/i2c.h"
#include "pindef.h"

// bitfield labs logo
const unsigned long bfl_logo_size=706;
unsigned char bfl_logo_data[]={
    0x42,0x4d,0xc2,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x82,0x00,0x00,0x00,0x6c,0x00,
    0x00,0x00,0x80,0x00,0x00,0x00,0x24,0x00,0x00,0x00,0x01,0x00,0x01,0x00,0x00,0x00,
    0x00,0x00,0x40,0x02,0x00,0x00,0x13,0x0b,0x00,0x00,0x13,0x0b,0x00,0x00,0x02,0x00,
    0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0xff,0x00,0x00,0xff,0x00,0x00,0xff,0x00,
    0x00,0x00,0x00,0x00,0x00,0xff,0x42,0x47,0x52,0x73,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0xff,
    0xff,0x00,0xff,0x00,0x7f,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xfc,0x00,0x0f,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xf8,0x00,0x07,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xf0,0x00,0x03,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xe0,0x00,0x03,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xc0,0x00,0x01,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0x80,0x00,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0x80,0x00,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0x00,0x00,0x00,0x7f,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0x30,0x03,0x00,0x7c,0x07,0x8c,0x27,0xc7,0x07,0xc2,0x0f,0xfc,0x38,0x0f,
    0x07,0x03,0x30,0x1b,0x80,0x7c,0x03,0x08,0x27,0x86,0x03,0x80,0x03,0xf8,0x30,0x0e,
    0x03,0x01,0x34,0x1f,0xa0,0x7c,0xf1,0x19,0xe7,0x8c,0x31,0x0c,0x63,0xf0,0xe1,0x8c,
    0x61,0xf0,0x3d,0xdf,0xe8,0x7c,0xf1,0x19,0xe7,0x8c,0x7d,0x0c,0x63,0xf0,0xe3,0x8c,
    0x71,0xf0,0x3d,0xff,0xfc,0x7c,0xf1,0x19,0xe1,0x8c,0x07,0x1c,0xf3,0xf1,0xe3,0xcc,
    0xf1,0x80,0x3f,0xbf,0xfc,0x7c,0x61,0x19,0xe1,0x8c,0x63,0x1c,0xf3,0xf1,0xe3,0xcc,
    0xf1,0x81,0x3f,0xbf,0xfe,0x7c,0x03,0x18,0xe1,0x8c,0x63,0x1c,0x63,0xf1,0xe1,0x8c,
    0x61,0x0f,0x3f,0x3f,0xfe,0x7c,0x07,0x18,0x27,0x8e,0x03,0x1c,0x03,0xf1,0xf0,0x1c,
    0x03,0x01,0x9f,0x3c,0x7c,0xfc,0x47,0xf8,0x23,0xff,0x87,0x1f,0x13,0xf1,0xf8,0x3c,
    0x8f,0x81,0x9f,0xbd,0x7c,0xfc,0x07,0x19,0xf0,0x8f,0xff,0x1f,0xf3,0xf1,0xff,0xfc,
    0xff,0xff,0xcf,0xfd,0x79,0xfe,0x0f,0x19,0xf8,0x8f,0xff,0x1f,0xf3,0xf1,0xff,0xfc,
    0xff,0xff,0xc7,0xfc,0x71,0xfe,0x0f,0x19,0xf8,0x8f,0xff,0x3f,0xf3,0xf3,0xff,0xfc,
    0xff,0xff,0xf3,0xff,0xf3,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xf8,0x7f,0xf9,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xfc,0x07,0xf9,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xff,0x07,0xfc,0x1f,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xff,0xfb,0xee,0x0f,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xff,0xfc,0xef,0xcf,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xff,0xfc,0xcf,0xcf,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xff,0xfc,0x6f,0x9f,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xff,0xfe,0x7c,0x3f,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xff,0xfc,0xf0,0x7f,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xff,0xfc,0xc0,0x7f,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xff,0xfc,0xc6,0x3f,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xff,0xfe,0x3e,0xbf,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xff,0xff,0xfe,0xbf,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff,0xff,0xff,0xfe,0x3f,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0xff,0xff
};


//------------------------------------------------------------------------------
// local variables

ssd1306_t sDisp;


//------------------------------------------------------------------------------
void display_init()
{
    i2c_init(i2c0, 1000000);
    gpio_set_function(AGPIN_D_SDA, GPIO_FUNC_I2C);
    gpio_set_function(AGPIN_D_SCL, GPIO_FUNC_I2C);
    gpio_pull_up(AGPIN_D_SDA);
    gpio_pull_up(AGPIN_D_SCL);

    sDisp.external_vcc=false;
    ssd1306_init(&sDisp, 128, 32, 0x3C, i2c0);
    ssd1306_clear(&sDisp);
    ssd1306_bmp_show_image(&sDisp, bfl_logo_data, bfl_logo_size);
    ssd1306_show(&sDisp);
}

//------------------------------------------------------------------------------
void display_update()
{

}
